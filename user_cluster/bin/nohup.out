+ date_str=20200923
+ cluster_cnt=3000
+ try_cnt=1
+ hdfs_embedding_dir=s3a://pm-hdfs2/user/wangcong/user_cluster/merge_embedding/20200923
+ local_embedding_dir=../data/embedding/20200923
+ local_cluster_dir=../data/cluster/20200923
+ mkdir -p ../data/cluster/20200923
+ rm -rf '../data/cluster/20200923/*'
+ ./user_cluster -min-total-click=20 -cluster-count=3000 -dimension=50 -iteration=300 -sample=50 -try=1
+ cat ../data/embedding/20200923/part-00000 ../data/embedding/20200923/part-00001 ../data/embedding/20200923/part-00002 ../data/embedding/20200923/part-00003 ../data/embedding/20200923/part-00004 ../data/embedding/20200923/part-00005 ../data/embedding/20200923/part-00006 ../data/embedding/20200923/part-00007 ../data/embedding/20200923/part-00008 ../data/embedding/20200923/part-00009 ../data/embedding/20200923/part-00010 ../data/embedding/20200923/part-00011 ../data/embedding/20200923/part-00012 ../data/embedding/20200923/part-00013 ../data/embedding/20200923/part-00014 ../data/embedding/20200923/part-00015 ../data/embedding/20200923/part-00016 ../data/embedding/20200923/part-00017 ../data/embedding/20200923/part-00018 ../data/embedding/20200923/part-00019 ../data/embedding/20200923/part-00020 ../data/embedding/20200923/part-00021 ../data/embedding/20200923/part-00022 ../data/embedding/20200923/part-00023 ../data/embedding/20200923/part-00024 ../data/embedding/20200923/part-00025 ../data/embedding/20200923/part-00026 ../data/embedding/20200923/part-00027 ../data/embedding/20200923/part-00028 ../data/embedding/20200923/part-00029 ../data/embedding/20200923/part-00030 ../data/embedding/20200923/part-00031 ../data/embedding/20200923/part-00032 ../data/embedding/20200923/part-00033 ../data/embedding/20200923/part-00034 ../data/embedding/20200923/part-00035 ../data/embedding/20200923/part-00036 ../data/embedding/20200923/part-00037 ../data/embedding/20200923/part-00038 ../data/embedding/20200923/part-00039 ../data/embedding/20200923/part-00040 ../data/embedding/20200923/part-00041 ../data/embedding/20200923/part-00042 ../data/embedding/20200923/part-00043 ../data/embedding/20200923/part-00044 ../data/embedding/20200923/part-00045 ../data/embedding/20200923/part-00046 ../data/embedding/20200923/part-00047 ../data/embedding/20200923/part-00048 ../data/embedding/20200923/part-00049 ../data/embedding/20200923/part-00050 ../data/embedding/20200923/part-00051 ../data/embedding/20200923/part-00052 ../data/embedding/20200923/part-00053 ../data/embedding/20200923/part-00054 ../data/embedding/20200923/part-00055 ../data/embedding/20200923/part-00056 ../data/embedding/20200923/part-00057 ../data/embedding/20200923/part-00058 ../data/embedding/20200923/part-00059 ../data/embedding/20200923/part-00060 ../data/embedding/20200923/part-00061 ../data/embedding/20200923/part-00062 ../data/embedding/20200923/part-00063 ../data/embedding/20200923/part-00064 ../data/embedding/20200923/part-00065 ../data/embedding/20200923/part-00066 ../data/embedding/20200923/part-00067 ../data/embedding/20200923/part-00068 ../data/embedding/20200923/part-00069 ../data/embedding/20200923/part-00070 ../data/embedding/20200923/part-00071 ../data/embedding/20200923/part-00072 ../data/embedding/20200923/part-00073 ../data/embedding/20200923/part-00074 ../data/embedding/20200923/part-00075 ../data/embedding/20200923/part-00076 ../data/embedding/20200923/part-00077 ../data/embedding/20200923/part-00078 ../data/embedding/20200923/part-00079 ../data/embedding/20200923/part-00080 ../data/embedding/20200923/part-00081 ../data/embedding/20200923/part-00082 ../data/embedding/20200923/part-00083 ../data/embedding/20200923/part-00084 ../data/embedding/20200923/part-00085 ../data/embedding/20200923/part-00086 ../data/embedding/20200923/part-00087 ../data/embedding/20200923/part-00088 ../data/embedding/20200923/part-00089 ../data/embedding/20200923/part-00090 ../data/embedding/20200923/part-00091 ../data/embedding/20200923/part-00092 ../data/embedding/20200923/part-00093 ../data/embedding/20200923/part-00094 ../data/embedding/20200923/part-00095 ../data/embedding/20200923/part-00096 ../data/embedding/20200923/part-00097 ../data/embedding/20200923/part-00098 ../data/embedding/20200923/part-00099
Start load user embeddings...
Load user embeddings finished. user count: 22881543, valid count: 3650887, cost: 133081ms
Start cluster...
+ date_str=20200923
+ cluster_cnt=30
+ try_cnt=3
+ hdfs_embedding_dir=s3a://pm-hdfs2/user/wangcong/user_cluster/merge_embedding/20200923
+ local_embedding_dir=../data/embedding/20200923
+ local_cluster_dir=../data/cluster/20200923
+ mkdir -p ../data/cluster/20200923
+ ./user_cluster -min-total-click=20 -cluster-count=30 -dimension=50 -iteration=300 -sample=30 -try=3
Start load user embeddings...
+ cat ../data/embedding/20200923/part-00000 ../data/embedding/20200923/part-00001 ../data/embedding/20200923/part-00002 ../data/embedding/20200923/part-00003 ../data/embedding/20200923/part-00004 ../data/embedding/20200923/part-00005 ../data/embedding/20200923/part-00006 ../data/embedding/20200923/part-00007 ../data/embedding/20200923/part-00008 ../data/embedding/20200923/part-00009 ../data/embedding/20200923/part-00010 ../data/embedding/20200923/part-00011 ../data/embedding/20200923/part-00012 ../data/embedding/20200923/part-00013 ../data/embedding/20200923/part-00014 ../data/embedding/20200923/part-00015 ../data/embedding/20200923/part-00016 ../data/embedding/20200923/part-00017 ../data/embedding/20200923/part-00018 ../data/embedding/20200923/part-00019 ../data/embedding/20200923/part-00020 ../data/embedding/20200923/part-00021 ../data/embedding/20200923/part-00022 ../data/embedding/20200923/part-00023 ../data/embedding/20200923/part-00024 ../data/embedding/20200923/part-00025 ../data/embedding/20200923/part-00026 ../data/embedding/20200923/part-00027 ../data/embedding/20200923/part-00028 ../data/embedding/20200923/part-00029 ../data/embedding/20200923/part-00030 ../data/embedding/20200923/part-00031 ../data/embedding/20200923/part-00032 ../data/embedding/20200923/part-00033 ../data/embedding/20200923/part-00034 ../data/embedding/20200923/part-00035 ../data/embedding/20200923/part-00036 ../data/embedding/20200923/part-00037 ../data/embedding/20200923/part-00038 ../data/embedding/20200923/part-00039 ../data/embedding/20200923/part-00040 ../data/embedding/20200923/part-00041 ../data/embedding/20200923/part-00042 ../data/embedding/20200923/part-00043 ../data/embedding/20200923/part-00044 ../data/embedding/20200923/part-00045 ../data/embedding/20200923/part-00046 ../data/embedding/20200923/part-00047 ../data/embedding/20200923/part-00048 ../data/embedding/20200923/part-00049 ../data/embedding/20200923/part-00050 ../data/embedding/20200923/part-00051 ../data/embedding/20200923/part-00052 ../data/embedding/20200923/part-00053 ../data/embedding/20200923/part-00054 ../data/embedding/20200923/part-00055 ../data/embedding/20200923/part-00056 ../data/embedding/20200923/part-00057 ../data/embedding/20200923/part-00058 ../data/embedding/20200923/part-00059 ../data/embedding/20200923/part-00060 ../data/embedding/20200923/part-00061 ../data/embedding/20200923/part-00062 ../data/embedding/20200923/part-00063 ../data/embedding/20200923/part-00064 ../data/embedding/20200923/part-00065 ../data/embedding/20200923/part-00066 ../data/embedding/20200923/part-00067 ../data/embedding/20200923/part-00068 ../data/embedding/20200923/part-00069 ../data/embedding/20200923/part-00070 ../data/embedding/20200923/part-00071 ../data/embedding/20200923/part-00072 ../data/embedding/20200923/part-00073 ../data/embedding/20200923/part-00074 ../data/embedding/20200923/part-00075 ../data/embedding/20200923/part-00076 ../data/embedding/20200923/part-00077 ../data/embedding/20200923/part-00078 ../data/embedding/20200923/part-00079 ../data/embedding/20200923/part-00080 ../data/embedding/20200923/part-00081 ../data/embedding/20200923/part-00082 ../data/embedding/20200923/part-00083 ../data/embedding/20200923/part-00084 ../data/embedding/20200923/part-00085 ../data/embedding/20200923/part-00086 ../data/embedding/20200923/part-00087 ../data/embedding/20200923/part-00088 ../data/embedding/20200923/part-00089 ../data/embedding/20200923/part-00090 ../data/embedding/20200923/part-00091 ../data/embedding/20200923/part-00092 ../data/embedding/20200923/part-00093 ../data/embedding/20200923/part-00094 ../data/embedding/20200923/part-00095 ../data/embedding/20200923/part-00096 ../data/embedding/20200923/part-00097 ../data/embedding/20200923/part-00098 ../data/embedding/20200923/part-00099
Load user embeddings finished. user count: 22881543, valid count: 2220059, cost: 334717ms
Start cluster...
cluster try count: 0 sse: 46079.419100
cluster try count: 1 sse: 45810.008385
cluster try count: 2 sse: 45947.962825
Cluster finished. cost: 14731721ms
cluster try count: 0 sse: 42153.371641
Cluster finished. cost: 1055634583ms
